
{% extends "layout.html" %}
{% block content %}
<div class="container">
    <h1>Challenge #{{ challenge.id }}</h1>
    <h3>{{ challenge.challengename }}</h3>
    <p>{{ challenge.description }}</p>
    <p>Saving potential: {{ challenge.co2offset }}kg/co2</p>
    <p>Saved CO2 by all participants in this challenge: {{ total_co2offset }}kg/co2</p>
    <p>Saved CO2 by you: {{ co2offset_by_you }}kg/co2</p>
    {% if user_challenge_association != None %}
    {% if user_challenge_association.succeeded == 0 %}
    <p>Committed to this challenge since {{ user_challenge_association.commited_to_at | datetime}}</p>
    {% else %}
    <p>Challenge cancelled at {{ user_challenge_association.done_at }}</p>
    {% endif %}
    {% endif %}

    <ul class="timeline">
        {% for streak_association in streak %}
        <li>
            {{ streak_association.done_at | datetime }}
        </li>
        {% endfor %}
    </ul>



    <p><a href="{{ url_for('challenge_blueprint.mark_done', challenge_id=challenge.id) }}" class="btn btn-primary btn-large
    {% if user_challenge_association == None %}
    disabled
    {% endif %}
    ">Mark challenge done for today</a></p>
    <p><a href="{{ url_for('challenge_blueprint.mark_failed', challenge_id=challenge.id) }}" class="btn btn-primary btn-large btn-danger
    {% if user_challenge_association == None %}
    disabled
    {% endif %}
    ">Abort challenge</a></p>
    <p><a href="{{ url_for('challenge_blueprint.commit', challenge_id=challenge.id) }}" class="btn btn-primary btn-large
    {% if user_challenge_association != None %}
    disabled
    {% endif %}
    ">Commit to this challenge</a></p>
    <p><a href="/users/" class="btn btn-primary btn-large">Go back to challenge overview</a></p>
</div>

</div>

{% endblock %}

